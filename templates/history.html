{% extends "base.html" %}

{% block title %}Transaction History{% endblock %}

{% block content %}
<div class="card">
    <h3>Bill History</h3>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Bill #</th>
                <th>Customer</th>
                <th>Payment</th>
                <th>Total</th>
                <th>Items</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for bill in bills %}
            <tr>
                <td>{{ bill.date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>{{ bill.bill_number }}</td>
                <td>{{ bill.customer_name }}</td>
                <td>
                    <span class="badge {{ 'badge-cash' if bill.payment_mode == 'Cash' else 'badge-card' }}">
                        {{ bill.payment_mode or 'Cash' }}
                    </span>
                </td>
                <td style="font-weight: bold;">${{ "%.2f"|format(bill.total_amount) }}</td>
                <td>{{ bill.items|length }}</td>
                <td>
                    <!-- Print Reprint function needed logic -->
                    <button class="btn btn-sm" onclick="alert('Reprint feature coming soon!')">Print</button>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7">No transactions found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .badge-cash {
        background-color: #d1fae5;
        color: #065f46;
    }

    .badge-card {
        background-color: #dbeafe;
        color: #1e40af;
    }
</style>
{% endblock %}