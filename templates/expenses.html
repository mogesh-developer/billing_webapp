{% extends "base.html" %}

{% block title %}Expenses{% endblock %}

{% block content %}
<div class="card" style="margin-bottom: 20px;">
    <h3>Add New Expense</h3>
    <form method="POST" action="{{ url_for('expenses') }}"
        style="display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end;">
        <div class="form-group" style="flex: 2;">
            <label>Description</label>
            <input type="text" name="description" class="form-control" placeholder="Rent, Electricity, Restocking..."
                required>
        </div>
        <div class="form-group" style="flex: 1;">
            <label>Amount</label>
            <input type="number" step="0.01" name="amount" class="form-control" placeholder="0.00" required>
        </div>
        <div class="form-group" style="flex: 1;">
            <label>Category</label>
            <select name="category" class="form-control">
                <option value="Operational">Operational</option>
                <option value="Stock">Stock Purchase</option>
                <option value="Salary">Salary</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary" style="margin-bottom: 2px;">Add Expense</button>
        </div>
    </form>
</div>

<div class="card">
    <h3>Expense History</h3>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Category</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for exp in expenses %}
            <tr>
                <td>{{ exp.date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>{{ exp.description }}</td>
                <td><span class="badge">{{ exp.category }}</span></td>
                <td style="font-weight: bold; color: var(--danger-color);">-{{ "%.2f"|format(exp.amount) }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4">No expenses recorded.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .badge {
        background: #f1f5f9;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.85rem;
        color: var(--text-muted);
    }
</style>
{% endblock %}